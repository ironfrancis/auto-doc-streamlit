# Auto-doc-streamlit é¡¹ç›®è‡ªåŠ¨ç¯å¢ƒæ¿€æ´»
# å½“è¿›å…¥é¡¹ç›®ç›®å½•æ—¶è‡ªåŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ

# æ£€æŸ¥æ˜¯å¦åœ¨ Auto-doc-streamlit é¡¹ç›®ç›®å½•ä¸­
check_auto_doc_project() {
    if [[ "$PWD" == "/Users/xuchao/Projects/Auto-doc-streamlit"* ]]; then
        # æ£€æŸ¥æ˜¯å¦å·²ç»åœ¨è™šæ‹Ÿç¯å¢ƒä¸­
        if [[ "$VIRTUAL_ENV" != *"Auto-doc-streamlit/.venv"* ]]; then
            # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
            if [ -f "/Users/xuchao/Projects/Auto-doc-streamlit/.venv/bin/activate" ]; then
                source "/Users/xuchao/Projects/Auto-doc-streamlit/.venv/bin/activate"
                echo "ğŸš€ å·²è‡ªåŠ¨æ¿€æ´» Auto-doc-streamlit è™šæ‹Ÿç¯å¢ƒ"
            fi
        fi
    else
        # å¦‚æœä¸åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œä¸”å½“å‰è™šæ‹Ÿç¯å¢ƒæ˜¯é¡¹ç›®çš„ï¼Œåˆ™é€€å‡º
        if [[ "$VIRTUAL_ENV" == *"Auto-doc-streamlit/.venv"* ]]; then
            deactivate
            echo "ğŸ‘‹ å·²é€€å‡º Auto-doc-streamlit è™šæ‹Ÿç¯å¢ƒ"
        fi
    fi
}

# å°†å‡½æ•°æ·»åŠ åˆ° zsh çš„ chpwd hookï¼ˆç›®å½•æ”¹å˜æ—¶æ‰§è¡Œï¼‰
autoload -U add-zsh-hook
add-zsh-hook chpwd check_auto_doc_project

# åˆå§‹æ£€æŸ¥ï¼ˆå¦‚æœå·²ç»åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼‰
check_auto_doc_project
