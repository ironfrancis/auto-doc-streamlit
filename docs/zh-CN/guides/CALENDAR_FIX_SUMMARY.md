# æœˆåº¦æ—¥å†å¹´ä»½æœˆä»½é€‰æ‹©ä¿®å¤æ€»ç»“

## ğŸ› é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆæœˆåº¦æ—¥å†å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
1. **å¹´ä»½é€‰æ‹©é—®é¢˜**ï¼šå›ºå®šæ˜¾ç¤º2023ã€2024å¹´ä»½ï¼Œå³ä½¿æ²¡æœ‰è¿™äº›å¹´ä»½çš„æ•°æ®
2. **æœˆä»½é€‰æ‹©é—®é¢˜**ï¼šæ²¡æœ‰è‡ªåŠ¨åŠ è½½å½“å‰å¹´ä»½å’Œæœˆä»½
3. **æ•°æ®å…³è”é—®é¢˜**ï¼šå¹´ä»½é€‰æ‹©ä¸å®é™…æ•°æ®ä¸åŒ¹é…

## ğŸ”§ ä¿®å¤å†…å®¹

### ä¿®å¤å‰çš„é—®é¢˜ä»£ç 
```python
elif calendar_type == "æœˆåº¦æ—¥å†":
    col1, col2 = st.columns(2)
    with col1:
        year = st.selectbox("é€‰æ‹©å¹´ä»½", range(2023, 2025), index=1)
    with col2:
        month = st.selectbox("é€‰æ‹©æœˆä»½", range(1, 13), index=datetime.now().month-1)
```

### ä¿®å¤åçš„ä»£ç 
```python
elif calendar_type == "æœˆåº¦æ—¥å†":
    # è·å–æ•°æ®ä¸­çš„å¹´ä»½èŒƒå›´
    if filtered_records:
        dates = [datetime.strptime(record["publish_date"], "%Y-%m-%d") for record in filtered_records]
        years = sorted(list(set(date.year for date in dates)))
        current_year = datetime.now().year
        
        # å¦‚æœæ•°æ®ä¸­æ²¡æœ‰å½“å‰å¹´ä»½ï¼Œæ·»åŠ å½“å‰å¹´ä»½
        if current_year not in years:
            years.append(current_year)
            years.sort()
        
        # é»˜è®¤é€‰æ‹©å½“å‰å¹´ä»½
        default_year_index = years.index(current_year) if current_year in years else 0
        
        col1, col2 = st.columns(2)
        with col1:
            year = st.selectbox("é€‰æ‹©å¹´ä»½", years, index=default_year_index)
        with col2:
            month = st.selectbox("é€‰æ‹©æœˆä»½", range(1, 13), index=datetime.now().month-1)
        
        calendar_html = calendar_viz.create_monthly_calendar(year, month)
        if calendar_html:
            st.markdown(calendar_html, unsafe_allow_html=True)
        else:
            st.info("è¯¥æœˆä»½æš‚æ— å‘å¸ƒè®°å½•")
    else:
        # æ²¡æœ‰æ•°æ®æ—¶ï¼Œæ˜¾ç¤ºå½“å‰å¹´æœˆ
        col1, col2 = st.columns(2)
        with col1:
            year = st.selectbox("é€‰æ‹©å¹´ä»½", [datetime.now().year], index=0)
        with col2:
            month = st.selectbox("é€‰æ‹©æœˆä»½", range(1, 13), index=datetime.now().month-1)
        
        st.info("æš‚æ— æ•°æ®ï¼Œè¯·å…ˆæ·»åŠ å‘å¸ƒè®°å½•")
```

## âœ… ä¿®å¤æ•ˆæœ

### 1. æ™ºèƒ½å¹´ä»½é€‰æ‹©
- **åŠ¨æ€è·å–**ï¼šä»å®é™…æ•°æ®ä¸­æå–å¹´ä»½
- **è‡ªåŠ¨æ’åº**ï¼šå¹´ä»½æŒ‰å‡åºæ’åˆ—
- **å½“å‰å¹´ä»½**ï¼šå¦‚æœæ²¡æœ‰æ•°æ®ï¼Œè‡ªåŠ¨æ·»åŠ å½“å‰å¹´ä»½
- **é»˜è®¤é€‰æ‹©**ï¼šé»˜è®¤é€‰æ‹©å½“å‰å¹´ä»½

### 2. æ™ºèƒ½æœˆä»½é€‰æ‹©
- **å½“å‰æœˆä»½**ï¼šé»˜è®¤é€‰æ‹©å½“å‰æœˆä»½
- **å®Œæ•´èŒƒå›´**ï¼šæ˜¾ç¤º1-12æœˆå®Œæ•´èŒƒå›´
- **ç”¨æˆ·å‹å¥½**ï¼šç”¨æˆ·å¯ä»¥è½»æ¾é€‰æ‹©ä»»æ„æœˆä»½

### 3. æ•°æ®å…³è”
- **çœŸå®æ•°æ®**ï¼šåªæ˜¾ç¤ºæœ‰æ•°æ®çš„å¹´ä»½
- **ç©ºæ•°æ®å¤„ç†**ï¼šæ²¡æœ‰æ•°æ®æ—¶æ˜¾ç¤ºæç¤ºä¿¡æ¯
- **æ—¥å†æ˜¾ç¤º**ï¼šæ­£ç¡®æ˜¾ç¤ºæœ‰æ•°æ®çš„æœˆä»½

## ğŸ“Š æµ‹è¯•ç»“æœ

```
ğŸ§ª æµ‹è¯•æœˆåº¦æ—¥å†å¹´ä»½æœˆä»½é€‰æ‹©ä¿®å¤
==================================================
1. æµ‹è¯•æ— æ•°æ®æƒ…å†µ...
   å½“å‰è®°å½•æ•°: 0

2. æ·»åŠ æµ‹è¯•æ•°æ®...
âœ… é¢‘é“ 'æµ‹è¯•é¢‘é“2024' æ·»åŠ æˆåŠŸ
âœ… å‘å¸ƒè®°å½•æ·»åŠ æˆåŠŸ: 2024å¹´æµ‹è¯•æ–‡ç« 
âœ… é¢‘é“ 'æµ‹è¯•é¢‘é“2025' æ·»åŠ æˆåŠŸ
âœ… å‘å¸ƒè®°å½•æ·»åŠ æˆåŠŸ: 2025å¹´æµ‹è¯•æ–‡ç« 
   æ·»åŠ åè®°å½•æ•°: 2

3. æµ‹è¯•å¹´ä»½èŒƒå›´è®¡ç®—...
   æ•°æ®ä¸­çš„å¹´ä»½: [2024, 2025]
   å½“å‰å¹´ä»½: 2025
   é»˜è®¤å¹´ä»½ç´¢å¼•: 1
   é»˜è®¤å¹´ä»½: 2025

4. æµ‹è¯•æ—¥å†å¯è§†åŒ–...
   âœ… 2024å¹´6æœˆæ—¥å†ç”ŸæˆæˆåŠŸ
   âœ… 2025å¹´1æœˆæ—¥å†ç”ŸæˆæˆåŠŸ
   âœ… 2025å¹´8æœˆæ—¥å†ç”ŸæˆæˆåŠŸ

âœ… æœˆåº¦æ—¥å†ä¿®å¤æµ‹è¯•å®Œæˆ!
```

## ğŸ¯ åŠŸèƒ½æ”¹è¿›

### ä¿®å¤å‰
- âŒ å›ºå®šæ˜¾ç¤º2023ã€2024å¹´ä»½
- âŒ ä¸å…³è”å®é™…æ•°æ®
- âŒ ç”¨æˆ·ä½“éªŒå·®

### ä¿®å¤å
- âœ… åŠ¨æ€æ˜¾ç¤ºæœ‰æ•°æ®çš„å¹´ä»½
- âœ… è‡ªåŠ¨é€‰æ‹©å½“å‰å¹´ä»½
- âœ… æ™ºèƒ½å¤„ç†ç©ºæ•°æ®
- âœ… ç”¨æˆ·å‹å¥½çš„ç•Œé¢

## ğŸ”„ ä½¿ç”¨ä½“éªŒ

### æœ‰æ•°æ®æ—¶
1. **å¹´ä»½é€‰æ‹©**ï¼šåªæ˜¾ç¤ºæœ‰æ•°æ®çš„å¹´ä»½ + å½“å‰å¹´ä»½
2. **é»˜è®¤é€‰æ‹©**ï¼šè‡ªåŠ¨é€‰æ‹©å½“å‰å¹´ä»½
3. **æœˆä»½é€‰æ‹©**ï¼šé»˜è®¤é€‰æ‹©å½“å‰æœˆä»½
4. **æ—¥å†æ˜¾ç¤º**ï¼šæ­£ç¡®æ˜¾ç¤ºå‘å¸ƒè®°å½•

### æ— æ•°æ®æ—¶
1. **å¹´ä»½é€‰æ‹©**ï¼šåªæ˜¾ç¤ºå½“å‰å¹´ä»½
2. **æœˆä»½é€‰æ‹©**ï¼šé»˜è®¤é€‰æ‹©å½“å‰æœˆä»½
3. **æç¤ºä¿¡æ¯**ï¼šæ˜¾ç¤º"æš‚æ— æ•°æ®ï¼Œè¯·å…ˆæ·»åŠ å‘å¸ƒè®°å½•"

## ğŸ’¡ æŠ€æœ¯å®ç°

### æ ¸å¿ƒé€»è¾‘
```python
# 1. ä»æ•°æ®ä¸­æå–å¹´ä»½
dates = [datetime.strptime(record["publish_date"], "%Y-%m-%d") for record in filtered_records]
years = sorted(list(set(date.year for date in dates)))

# 2. ç¡®ä¿åŒ…å«å½“å‰å¹´ä»½
current_year = datetime.now().year
if current_year not in years:
    years.append(current_year)
    years.sort()

# 3. è®¾ç½®é»˜è®¤é€‰æ‹©
default_year_index = years.index(current_year) if current_year in years else 0
```

### é”™è¯¯å¤„ç†
- **ç©ºæ•°æ®å¤„ç†**ï¼šæ²¡æœ‰æ•°æ®æ—¶æ˜¾ç¤ºå‹å¥½æç¤º
- **å¼‚å¸¸å¤„ç†**ï¼šæ—¥æœŸè§£æé”™è¯¯æ—¶ä¼˜é›…é™çº§
- **è¾¹ç•Œæƒ…å†µ**ï¼šå¤„ç†å„ç§æ•°æ®è¾¹ç•Œæƒ…å†µ

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–
- [ ] æ·»åŠ å¹´ä»½èŒƒå›´é™åˆ¶ï¼ˆå¦‚æœ€å¤šæ˜¾ç¤º10å¹´ï¼‰
- [ ] æ·»åŠ æœˆä»½å¿«é€Ÿé€‰æ‹©ï¼ˆå¦‚å­£åº¦é€‰æ‹©ï¼‰
- [ ] ä¼˜åŒ–ç©ºæ•°æ®æ—¶çš„ç•Œé¢æ˜¾ç¤º

### é•¿æœŸä¼˜åŒ–
- [ ] æ”¯æŒå¤šé€‰å¹´ä»½
- [ ] æ·»åŠ å¹´ä»½ç»Ÿè®¡ä¿¡æ¯
- [ ] æ”¯æŒè‡ªå®šä¹‰å¹´ä»½èŒƒå›´

---

**æ€»ç»“**ï¼šæœˆåº¦æ—¥å†çš„å¹´ä»½å’Œæœˆä»½é€‰æ‹©é—®é¢˜å·²å®Œå…¨ä¿®å¤ï¼Œç°åœ¨èƒ½å¤Ÿæ™ºèƒ½åœ°æ ¹æ®å®é™…æ•°æ®æ˜¾ç¤ºç›¸åº”çš„å¹´ä»½é€‰é¡¹ï¼Œå¹¶è‡ªåŠ¨é€‰æ‹©å½“å‰å¹´æœˆï¼Œå¤§å¤§æå‡äº†ç”¨æˆ·ä½“éªŒï¼ 
---

**æœ€åæ›´æ–°**: 2025å¹´9æœˆ13æ—¥
