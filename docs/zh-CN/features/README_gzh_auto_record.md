# 公众号文章自动记录功能

## 功能概述

公众号文章自动记录功能允许用户通过输入微信公众号文章链接，自动获取文章的基本信息（标题、发布时间、公众号名称等），并快速添加到数据记录中。

## 主要特性

### 🔍 自动信息获取
- **文章标题**: 自动提取文章标题
- **发布时间**: 自动获取文章发布时间
- **公众号名称**: 自动识别公众号名称
- **智能解析**: 支持多种时间格式的自动解析

### 📝 手动补充
- **手动输入**: 支持手动输入或修改所有字段
- **混合模式**: 自动获取 + 手动补充的混合模式
- **数据验证**: 确保数据的完整性和准确性

### 🏷️ 智能标签
- **自动标签**: 自动将公众号名称添加到标签中
- **手动标签**: 支持手动添加多个标签
- **标签管理**: 用逗号分隔多个标签

## 使用方法

### 1. 基本使用流程

1. **选择频道**: 在"公众号文章"标签页中选择要记录的频道
2. **输入链接**: 粘贴微信公众号文章链接
3. **自动获取**: 点击"🔍 自动获取信息"按钮
4. **检查信息**: 查看获取到的文章信息
5. **补充数据**: 填写数据指标（浏览量、点赞数等）
6. **保存记录**: 点击"💾 保存记录"完成记录

### 2. 支持的链接格式

```
https://mp.weixin.qq.com/s/xxx
```

### 3. 数据字段说明

| 字段 | 说明 | 获取方式 |
|------|------|----------|
| 文章标题 | 文章的主标题 | 自动获取 / 手动输入 |
| 发布时间 | 文章发布时间 | 自动获取 / 手动输入 |
| 公众号名称 | 发布文章的公众号 | 自动获取 |
| 浏览量 | 文章阅读量 | 手动输入 |
| 点赞数 | 文章点赞数 | 手动输入 |
| 评论数 | 文章评论数 | 手动输入 |
| 分享数 | 文章分享数 | 手动输入 |
| 标签 | 文章标签 | 自动 + 手动 |

## 技术实现

### 核心模块

- **get_publish_info.py**: 负责从微信公众号页面提取文章信息
- **数据采集器**: 使用现有的ChannelDataCollector进行数据存储
- **Streamlit界面**: 提供用户友好的Web界面

### 信息提取原理

1. **HTTP请求**: 使用requests库获取页面内容
2. **正则匹配**: 通过正则表达式提取关键信息
3. **数据解析**: 解析JavaScript变量中的文章信息
4. **错误处理**: 完善的异常处理机制

### 提取的信息字段

```python
{
    'create_time': '2025-08-03 06:05',  # 发布时间
    'title': '文章标题',                  # 文章标题
    'nickname': '公众号名称'              # 公众号名称
}
```

## 使用示例

### 示例1: 完全自动模式

1. 输入链接: `https://mp.weixin.qq.com/s/lpEte02Ky2Ihcig_3xaGPA`
2. 点击"自动获取信息"
3. 系统自动获取:
   - 标题: "硬科技引爆资本热潮，AI全产业链加速布局——一周投融资全景透视"
   - 发布时间: "2025-08-03 06:05"
   - 公众号: "耐心资本V"
4. 填写数据指标后保存

### 示例2: 混合模式

1. 输入链接并自动获取基本信息
2. 手动修改标题或补充其他信息
3. 添加自定义标签
4. 填写完整的数据指标
5. 保存记录

## 注意事项

### ⚠️ 使用限制

1. **网络要求**: 需要稳定的网络连接
2. **链接有效性**: 只能处理有效的微信公众号文章链接
3. **访问限制**: 某些文章可能因权限设置无法获取信息
4. **格式要求**: 链接必须是标准的微信公众号文章格式

### 🔧 故障排除

1. **获取失败**: 检查网络连接和链接有效性
2. **信息不完整**: 手动补充缺失的信息
3. **时间解析错误**: 手动输入正确的发布时间
4. **保存失败**: 确保所有必填字段都已填写

## 更新日志

### v1.0.0 (2025-01-XX)
- ✅ 实现基本的公众号文章信息自动获取
- ✅ 支持手动输入补充信息
- ✅ 集成到数据录入页面
- ✅ 添加智能标签功能
- ✅ 完善错误处理机制

## 相关功能

- [数据录入管理](../README_Data_Entry.md)
- [频道管理](../README_Channel_Registration.md)
- [数据导出](../README_Data_Export.md) 